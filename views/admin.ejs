<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSTA Admin Portal</title>
     <link rel="stylesheet" href="admin.css" />
  <script src="admin.js" defer></script>
</head>
<body>
    <!-- Admin Dashboard -->
    <div class="admin-container" id="adminDashboard">
        <header class="header">
            <div class="header-content">
                <h1>üõ† CSTA Admin Portal</h1>
<a href="/" class="logout-btn" onclick="logout()">Logout</a>       </header>

        <main class="main-content">
            <!-- Statistics -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="pendingCount">8</div>
                    <div class="stat-label">Pending Reviews</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="approvedCount">142</div>
                    <div class="stat-label">Approved Resources</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="rejectedCount">23</div>
                    <div class="stat-label">Rejected Submissions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalCount">173</div>
                    <div class="stat-label">Total Submissions</div>
                </div>
            </div>

            <!-- Submissions Section -->
            <div class="submissions-section">
                <div class="section-header">
                    <h2 class="section-title">Resource Submissions</h2>
                    <div class="filter-tabs">
                        <button class="filter-tab active" onclick="filterSubmissions('all')">All</button>
                        <button class="filter-tab" onclick="filterSubmissions('pending')">Pending</button>
                        <button class="filter-tab" onclick="filterSubmissions('approved')">Approved</button>
                        <button class="filter-tab" onclick="filterSubmissions('rejected')">Rejected</button>
                    </div>
                </div>

                <div class="submissions-list" id="submissionsList"> 
  <% if (Requests.length === 0) { %>
    <div class="empty-state">
      <h3>No submissions found</h3>
      <p>There are no requests at the moment.</p>
    </div>
  <% } else { %>
    <% Requests.forEach(submission => { %>
      <div class="submission-card" data-status="<%= Request.isApproved ? 'approved' : 'pending' %>">
        <div class="submission-header">
          <div style="flex: 1;">
            <h3 class="submission-title"><%= Request.ProductName %></h3>
            <div class="submission-meta">
              Submitted on <%= new Date(Request.createdAt || Request._id.getTimestamp()).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) %>
              <span class="status-badge status-<%= Request.isApproved ? 'approved' : 'pending' %>">
                <%= Request.isApproved ? 'Approved' : 'Pending' %>
              </span>
            </div>
          </div>
        </div>

        <p class="submission-description"><%= Request.Description %></p>

        <div class="submission-details">
          <div class="detail-item">
            <span class="detail-label">Website URL</span>
            <span class="detail-value"><a href="<%= Request.Website %>" target="_blank"><%= submission.Website %></a></span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Contact Email</span>
            <span class="detail-value"><%= Request.ContactEmail %></span>
          </div>
        </div>

        <div class="submission-actions">
          <form method="POST" action="/approve/<%= Request._id %>">
            <button class="action-btn approve-btn" type="submit">‚úÖ Approve</button>
          </form>
          <form method="POST" action="/reject/<%= Request._id %>">
            <button class="action-btn reject-btn" type="submit">‚ùå Reject</button>
          </form>
          <button class="action-btn view-btn" onclick="window.open('<%= Request.Website %>', '_blank')">
            üåê View Resource
          </button>
        </div>
      </div>
    <% }) %>
  <% } %>
                </div>
            </div>
        </main>
    </div>

   
</body>
</html>